---
import { Image } from 'astro:assets';
import {
	root,
	visualImage,
	visualImageBackground,
	visualImageContainer,
	logoLeft,
	logoInline,
	workInfo,
	workInfoSection,
	descriptionText,
	tagsList,
	tagsLink,
	dateText,
	assigningText,
} from './WorkCard.css';

interface Props {
	visualImageUrl: string;
	logoUrl: string;
	description: string;
	logoAlt: string;
	date: string;
	tags: string[];
	assigning: string;
	logoPosition: 'left' | 'inline';
}

const { visualImageUrl, logoUrl, description, logoAlt, date, tags, assigning, logoPosition } = Astro.props;
---

<article class={root}>
	<div class={visualImageContainer}>
		<Image class={visualImage} src={visualImageUrl} alt={''} width={227} height={320} />
		<Image class={visualImageBackground} src={visualImageUrl} alt={''} width={23} height={32} />
	</div>
	{
		logoPosition === 'left' && (
			<Image class={logoLeft} src={logoUrl} alt={logoAlt} widths={[160, 320, 640]} sizes="160px" inferSize />
		)
	}
	<div class={workInfo}>
		<div class={workInfoSection}>
			<h2 class={descriptionText}>{description}</h2>
			{
				logoPosition === 'inline' && (
					<Image class={logoInline} src={logoUrl} alt={logoAlt} inferSize layout="constrained" />
				)
			}
		</div>
		<div class={workInfoSection}>
			<nav class={tagsList}>
				{/* TODO: リンク先があってるかを確認する */}
				{
					tags.map((tag) => (
						<a class={tagsLink} href={`/works?tag=${tag}`}>
							#{tag}
						</a>
					))
				}
			</nav>
			<span class={dateText}>{date}</span>
			<p class={assigningText}>{assigning}</p>
		</div>
	</div>
</article>
